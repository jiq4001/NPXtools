<!-- toc -->

June 14, 2022

# DESCRIPTION

```
Package: NPXtools
Type: Package
Title: What the Package Does (Title Case)
Version: 0.1.0
Author: Jingjing Qi Icahn School of Medicine
Maintainer: Jingjing Qi <jingjing.qi@mssm.edu>
Description: Tools to read Olink NPX files to SummarizedExperiment with Row and Column Features,
    Functions to run reference-sample-based normalization between assays, 
    Plots pre and post Normalization data,
    Save normalized data and meta column data to csv files.
License: What license is it under?
Encoding: UTF-8
LazyData: true
Depends: R(>= 3.3.0)
Imports: 
    SummarizedExperiment (>= 1.20.0),
    magrittr (>= 2.0.1),
    tidyverse (>= 1.3.0),
    dplyr (>= 1.0.5),
    tidyr (>= 1.1.3),
    tibble (>= 3.1.0),
    ggplot2 (>= 3.3.3),
    xlsx (>= 0.6.5)
Suggests: knitr, rmarkdown
VignetteBuilder: knitr
RoxygenNote: 7.1.1```


# `bdg_norm`

bdg_norm (Reference sample based normalization)


## Description

normalize by adjust samples' value per plate to make that
 the reference sample among all plates are the same. option to
 pick using median, max, mean


## Usage

```r
bdg_norm(
  bridge.ls,
  data.ls,
  between.plate.method = "median",
  from_assay = "npx",
  save_assay = "inlot_normed"
)
```


## Arguments

Argument      |Description
------------- |----------------
`bridge.ls`     |     list of bridge.summarizedexperiment objs using pull_bdg()
`data.ls`     |     list of summarizedexperiment objs using read_npx(). normalized assay slot will be added to each of the object in the list.
`between.plate.method`     |     method to set the inter plate reference value of bridging samples using max can garantee no negative value of the normalized data
`from_assay`     |     select assay slot to be normalized
`save_assay`     |     name the assay slot for normalized data


# `cmb_npx_se`

cmb_npx_se (Merge a list of npx summarizedexperiment to one)


## Description

combine multiple npx summarizedexperiment obj
 only common analyt would reimain in the merged object,
 the LOD stored in the merged object will be the mean from all
 individual npx objects


## Usage

```r
cmb_npx_se(se_list)
```


## Arguments

Argument      |Description
------------- |----------------
`se_list`     |     list of npx summarizedexperiment obj rowData will be removed, common colData


## Value

combined summarizedexperiment obj


# `plot_npx_norm_qc`

plot_npx_norm_qc (Generate QC plots pre and post normalization )


## Description

normalization QC plots, generate
 1) analyt/pre vs post scatter plot, colored by plates
 2) optional to select a analyt of choice plot for
 pre vs post npx by plates scatter plots
 3) optional plot to track Randox behavior pre and post normalization
 if randox_info is given plot the targeted value


## Usage

```r
plot_npx_norm_qc(
  normed_se,
  bridge_pattern = "HD Urine Pool",
  fields = "Sample",
  example = NULL,
  Randox = F,
  randox_info_f = NULL
)
```


## Arguments

Argument      |Description
------------- |----------------
`normed_se`     |     a summarizedexperiment, normaly generated by cmb_npx_sc() after normalization
`bridge_pattern`     |     regex to identify bridging samples
`fields`     |     colData name from which to identify bridging samples uing the bridge_pattern
`example`     |     (optional)string of a analyt name, defalult is NULL
`Randox`     |     (optional) if to track Randox among plates, defalult is F
`randox_info_f`     |     (optional) if to plot Randox's target value. required to generate a csv file from the product.info sheet manually. Analyt    Randox    Target    SD IL2    Randox_1    49.81      8.72 IL2    Randox_2    191.77    33.56 IL2    Randox_3    399.19    69.87 IL4    Randox_1    18.8      3.29 IL4    Randox_2    67.69      11.85 IL4    Randox_3    241.12    42.2 IL6    Randox_1    16.36      2.69


# `pull_bdg`

pull_bdg (creat summarizedexperiment of only reference sampls from a list of summarizedexperiments by identifing patterns)


## Description

pull bridging sample from list of summarizeexperiment object by pattern string
 get bridging sample only before normalization by plate


## Usage

```r
pull_bdg(f_list, pattern = "hd", fields = "Assay")
```


## Arguments

Argument      |Description
------------- |----------------
`f_list`     |     list of summarizeexperiment objects
`pattern`     |     sting pattern used for regex to identify samples
`fields`     |     colData name from which to identify sample


## Value

list of summarizedexperiment obj


# `read_npx`

read_npx (read onlink npx file to summarizedexperiment)


## Description

read npx raw file to create a summarizedexperiment
 uniportID and LOD in rowfeatures
 file name, ctrl and qc warning are in the colData


## Usage

```r
read_npx(f, lot = "default", startrow = 8)
```


## Arguments

Argument      |Description
------------- |----------------
`f`     |     a string file path
`startrow`     |     8 for npx, 9 for quant
`lot:`     |     optional parameter to record lot information


## Value

a summarizedexperimet object.
 rowData is the feature and ctrl deviation,
 colData is the unique_id and subject id given by the operator


# `save_npx_csv`

save_npx_csv (same summarizedexpermient to csv)


## Description

save summarizedexpermient to csv files


## Usage

```r
save_npx_csv(se, pre_fix, assay2save = c("npx_default", "npx_inlot_normed"))
```


## Arguments

Argument      |Description
------------- |----------------
`se`     |     npx summarizedexpermient object
`pre_fix`     |     string of the file path
`assay2save`     |     vector string of which assay slot to save


